name: uni-project-template
services:
  drupal:
    image: xenyo/drupal:php8.1
    depends_on:
      - mariadb
    hostname: uni-project-template
    ports:
      - ${SSH_PORT:-22}:22
      - ${APACHE_PORT:-80}:80
    volumes:
      - ~/.ssh:/mnt/.ssh:ro
      - ./auth.json:/home/ubuntu/.config/composer/auth.json:ro
      - www:/var/www

  mariadb:
    image: mariadb:10
    environment:
      MARIADB_ALLOW_EMPTY_ROOT_PASSWORD: yes
    volumes:
      - db:/var/lib/mysql

volumes:
  www:
  db:
